{"properties":{},"description":"","processes":{"httpclient1":{"component":"com.sap.http.client","metadata":{"label":"HTTP Client","x":90,"y":174,"height":80,"width":120,"config":{"getUrl":"http://sdw.ecb.europa.eu/quickviewexport.do?SERIES_KEY=120.EXR.D.USD.EUR.SP00.A&type.csv","requestTimeoutInMs":5000,"getPeriodInMs":30000}}},"wiretap1":{"component":"com.sap.util.wiretap","metadata":{"label":"Wiretap","x":666,"y":148,"height":80,"width":120,"ui":"dynpath","config":{}}},"hdfsproducer1":{"component":"com.sap.storage.hdfs.producer","metadata":{"label":"HDFS Producer","x":677,"y":263,"height":80,"width":120,"config":{"hadoopNamenode":"spark-hdfs-adapter:8020","path":"/WebData/ECB/ecb-usd-eur-<date>-<time>.csv"}}},"javascriptoperator21":{"component":"com.sap.system.jsmengine","metadata":{"label":"JavaScript Operator 2","x":247,"y":250,"height":80,"width":120,"extensible":true,"config":{"script":"$.setPortCallback(\"input\",onInput);\n\nfunction isByteArray(data) {\n    return (typeof data === 'object' && Array.isArray(data) \n        && data.length > 0 && typeof data[0] === 'number')\n}\n\nfunction onInput(ctx,s) {\n    var msg = {};\n    var inbody = s.Body;\n\n    if (isByteArray(inbody)) {\n        inbody = String.fromCharCode.apply(null, inbody);\n        \n    msg.Attributes = {};    \n    // Add Commit Token to DataHub message header to stop pipeline from running continuously\n    msg.Attributes[\"message.commit.token\"] = \"stop-token\";\n    \n    }\n    \n    // remove first 5 lines\n    // break the textblock into an array of lines\n    inbody = inbody.split('\\n');\n    // remove 5 lines, starting at the first position\n    inbody.splice(0,5);\n    // join the array back into a single string\n    inbody = inbody.join('\\n');\n    \n    // Replace \"-\" characters with Nulls in Exchange Rate data\n    inbody = inbody.replace(/,-/g,\",\");\n    \n    msg.Body = inbody;\n    $.output(msg);\n    \n\n\n}\n\n"}}},"13multiplexer1":{"component":"com.sap.system.multiplexer.1-3","metadata":{"label":"1:3 Multiplexer","x":456,"y":210,"height":80,"width":120,"extensible":true,"config":{}}},"voraavroingestor1":{"component":"com.sap.vora.avroingestor","metadata":{"label":"Vora Avro Ingestor","x":666,"y":400,"height":80,"width":120,"config":{"databaseSchema":"WEBDATA","dsn":"v2://dqp:50000/?binary=true","tableType":"","format":"csv","defaultAvroSchema":"{   \"name\": \"ECB_EXCHANGE_RATE\",   \"type\": \"record\",   \"fields\": [     {       \"name\": \"ER_DATE\",       \"type\": [         \"null\",         \"date\"       ]     },     {       \"name\": \"EXCHANGE_RATE\",       \"type\": [         \"null\",         \"double\"       ]     }   ] }","user":"admin","password":"voraadmin"}}},"graphterminator1":{"component":"com.sap.util.graphTerminator","metadata":{"label":"Graph Terminator","x":950,"y":418,"height":80,"width":120,"config":{}}}},"groups":[],"connections":[{"metadata":{"points":"214,223 228.5,223 228.5,290 243,290"},"src":{"port":"outResponse","process":"httpclient1"},"tgt":{"port":"input","process":"javascriptoperator21"}},{"metadata":{"points":"371,290 411.5,290 411.5,250 452,250"},"src":{"port":"output","process":"javascriptoperator21"},"tgt":{"port":"in1","process":"13multiplexer1"}},{"metadata":{"points":"580,232 621,232 621,188 662,188"},"src":{"port":"out1","process":"13multiplexer1"},"tgt":{"port":"in","process":"wiretap1"}},{"metadata":{"points":"580,250 626.5,250 626.5,303 673,303"},"src":{"port":"out2","process":"13multiplexer1"},"tgt":{"port":"inFile","process":"hdfsproducer1"}},{"metadata":{"points":"580,268 621,268 621,440 662,440"},"src":{"port":"out3","process":"13multiplexer1"},"tgt":{"port":"in","process":"voraavroingestor1"}},{"metadata":{"points":"790,440 868,440 868,458 946,458"},"src":{"port":"out","process":"voraavroingestor1"},"tgt":{"port":"stop","process":"graphterminator1"}}],"inports":{},"outports":{}}